# ========================================================================================
# **1. 現在機能 vs クライアント要望比較**
# ========================================================================================
## 【1-1】コマンド・操作系統
┌──────────────────────┬─────────────────────────┬────────────────────────────┐  
│ **項目**                     │ **現在機能**                         │ **クライアント要望**                        │  
├──────────────────────┼─────────────────────────┼────────────────────────────┤  
│ CEDXM（CDX）読込            │ なし                                   │ ★最優先：CEDXM読込＋手動補完               │  
│ CAD的操作                    │ 基本的なマウス操作のみ                 │ スナップ・移動・回転・編集・柱/梁配置       │  
│ undo/redo                 │ なし                                   │ 操作履歴管理（CAD同等）                     │  
└──────────────────────┴─────────────────────────┴────────────────────────────┘

## 【1-2】表示・画面UI
┌──────────────────────┬─────────────────────────┬────────────────────────────┐  
│ **項目**                     │ **現在機能**                         │ **クライアント要望／修正方向**           │  
├──────────────────────┼─────────────────────────┼────────────────────────────┤  
│ 左マスターパネル表示         │ スクロール多い／固定なし              │ ★固定ヘッダー化、タブ式化、スクロール削減 │  
│ 案件ビュー位置               │ 通常スクロール内                     │ 上部固定（常時表示）                       │  
│ デュアルディスプレイ         │ 非対応                              │ 2画面連動・サブモニタ表示                  │  
│ 部材表示                     │ 柱／梁が分かりにくい                 │ 2D/3Dの整合性改善、階層レイヤ              │  
└──────────────────────┴─────────────────────────┴────────────────────────────┘

## 【1-3】割付・編集ルール
┌──────────────────────┬─────────────────────────┬────────────────────────────┐  
│ **項目**                     │ **現在機能**                         │ **課題・要望（反映済）**               │  
├──────────────────────┼─────────────────────────┼────────────────────────────┤  
│ 勝ち負けルール               │ 一部正しく当たらない                 │ ★精度改善（出隅の勝ち負け再設計）       │  
│ 長手方向（P28/P29等）        │ ズレが発生する場合あり               │ ★長手優先ロジックの安定化               │  
│ ボード回転                   │ 意図しない自動回転                   │ ルール固定／自動回転ON/OFF               │  
│ モジュール表示               │ 現状数値表示                         │ 910mm／1820mm基準のモジュール表示       │  
│ クリアランス設定             │ なし                                   │ 現場対応のため必須（上下左右mm設定）   │  
└──────────────────────┴─────────────────────────┴────────────────────────────┘

## 【1-4】環境（ローカル → サーバ）
┌──────────────────────┬─────────────────────────┬────────────────────────────┐  
│ **項目**                     │ **現在機能**                         │ **クライアント要望／改善**           │  
├──────────────────────┼─────────────────────────┼────────────────────────────┤  
│ 動作環境                     │ ローカルPCのみ                       │ ★サーバー化（VM or Docker）            │  
│ クライアント側セットアップ     │ 必要                                 │ ブラウザのみで動作（Zero Setup）       │  
│ データ共有                     │ 手動                                 │ SharePoint連携自動アップロード         │  
└──────────────────────┴─────────────────────────┴────────────────────────────┘

# ========================================================================================
# **2. ご要望対応順位（2026-2-5）**
# ========================================================================================

### ● **A. CEDXM（CDX）データ最優先**
*   データ仕様 → 即時解析
*   部屋・壁・柱・梁・間柱まで自動生成
*   読み込み後にブラウザ上で編集可能

### ● **B. ブラウザでのCAD的編集**
*   移動／回転／複製
*   柱・梁を手動追加
*   スナップポイント
*   実寸誤差・455ピッチに対応

### ● **C. 自動ボード選択**
*   天井高から最適ボード長自動選択（例：2400 / 2700 / 尺モジュール）

### ● **D. 表示整合性**
*   2D図 → 柱位置
*   3D図 → 構造表示  
    → 両者を連動させ、差異をなくす

### ● **E. 出力連動**
*   図面（PDF／DXF）
*   パーツリスト
*   積算結果  
    → すべて連動して更新

# ========================================================================================
# **3. 次回開発プラン**
# ========================================================================================

## ◆ **Phase 1：最優先**
**CEDXM読込 ＋ UI刷新 ＋ 割付ルール修正**
*   CEDXMデータパーサー
*   部屋・壁の自動生成
*   勝ち負けルールの再実装
*   長手方向優先ロジックの安定化
*   左パネル固定化（タブ式に変更）
*   案件ビュー上部固定
*   モジュール表示（910/1820）

## ◆ **Phase 2：割付ロジック強化**
*   ボード回転制御（ON/OFF）
*   455ピッチ & ズレ対応
*   柱・梁・間柱の自動生成
*   クリアランス設定（mm単位）

## ◆ **Phase 3：CAD編集**
*   移動／回転／複製
*   スナップ（端点・中点・延長）
*   2D/3D整合性改善

## ◆ **Phase 4：出力強化**
*   図面出力（PDF）
*   DXF出力
*   パーツリスト連動
*   積算データ連動

## ◆ Phase 5：環境構築
*   Docker化（サーバー側）
*   ブラウザアクセス化
*   SharePoint自動アップロード

================================================================================
以上が更新された機能比較・開発プランです。
高度CAD機能要望を詳細に分析し、段階的な開発計画を策定しました。
現在の基本システムから商用CADソフトウェアレベルまでの
包括的な開発ロードマップとなっています。
================================================================================

